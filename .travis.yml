language: haskell
install:
  - cabal install pandoc
before_script:
  - uname -a 
  - cat /etc/lsb-release
  - sudo apt-get update -q
  - sudo apt-get install -q ttf-arphic-gbsn00lp ttf-arphic-ukai ttf-wqy-microhei ttf-wqy-zenhei
  - sudo apt-get install -q texlive-xetex texlive-latex-recommended texlive-latex-extra
  - ~/.cabal/bin/pandoc -v
  - export PATH=~/.cabal/bin:$PATH

env:
  global:
    - secure: "O5U/e5r6b1Pq1c3EvGGK76DlHbIFsoSJsRaD0PJ3swNdZJR5lALrR3SaLm+s\nF70uI6nQxeNUjGh0MPIMQmDO7xIuUHUsVmN95YZJq/vJTzND6JtXK6LmImvS\ncBkSyWMm5JLpmaglDwVkmu7B7/PIdpM5Pe63xYg8xwZ+ApRwcvk="

rvm:
  - 1.9.3
script: 
  - chmod +x mkbok
  - ./mkbok --lang zh --build pdf
  - ./github-upload.rb rtthread_manual.zh.pdf RT-Thread/rtthread-manual-doc --description "generated by travis-ci, $TRAVIS_JOB_ID" --force --name rtthread_manual.zh.snapshot.pdf --skip-ssl-verification -t $GITHUB_TOKEN
